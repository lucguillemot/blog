---
layout: post
title: San Francisco Bay Area Neighborhoods Classification
img: sfoac
---
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<title>SFBA OAC</title>
	<link rel="stylesheet" href="{{ site.baseurl }}/lib/leaflet-0.7.3/leaflet.css" />
	<link rel="stylesheet" href="{{ site.baseurl }}/css/sfba-bg-oac.css" />
	<script src="{{ site.baseurl }}/lib/d3-master/d3.min.js"></script>
	<script src="{{ site.baseurl }}/lib/leaflet-0.7.3/leaflet.js"></script>
	<script src="http://maps.stamen.com/js/tile.stamen.js"></script>
</head>
<body>
	<div id="map"></div>
	<script>

	var map = new L.Map('map').setView([37.8082, -122.2668], 10 ); 
	//var layer = new L.StamenTileLayer("toner");
	var layer = new L.tileLayer("http://{s}.sm.mapstack.stamen.com/(toner-lite,$fff[difference],$666[@23],$fff[hsl-saturation@20])/{z}/{x}/{y}.png");
	map.addLayer(layer);
	map.scrollWheelZoom.disable();

	var svg = d3.select(map.getPanes().overlayPane).append("svg"),
	    g = svg.append("g").attr("class", "leaflet-zoom-hide");

	d3.json("{{ site.baseurl }}/geo/sfba-bg-clusters", function(collection) {
		var transform = d3.geo.transform({point: projectPoint}),
	      	path = d3.geo.path().projection(transform).pointRadius(4);

		var feature = g.selectAll("path")
		    .data(collection.features)
		  .enter().append("path")
		  .attr("class", function(d){return "bg CL"+d.properties.X10;})
		  .on("mouseover", function(d){
					  d3.select(".name").text(d.properties.NAMELSAD);
					});

		map.on("viewreset", reset);
		reset();

		// Reposition the SVG to cover the features.
		function reset() {
	    	var bounds = path.bounds(collection),
	        	topLeft = bounds[0],
	        	bottomRight = bounds[1];

	    	svg.attr("width", bottomRight[0] - topLeft[0])
		        .attr("height", bottomRight[1] - topLeft[1])
		        .style("left", topLeft[0] + "px")
		        .style("top", topLeft[1] + "px");

	    	g.attr("transform", "translate(" + -topLeft[0] + "," + -topLeft[1] + ")");

	    	feature.attr("d", path);
		}

		// Use Leaflet to implement a D3 geometric transformation.
		function projectPoint(x, y) {
	    	var point = map.latLngToLayerPoint(new L.LatLng(y, x));
	    	this.stream.point(point.x, point.y);
	  	}
	});

	</script>
	<div><p>One of the key concepts in urban studies and urban sociology is ‘urbanity’. It might be obvious that urbanity is ‘what makes the city the city’, but finding a definition that would make sense on a research schedule is much harder. I am trying to make a classification of neighborhoods in the Bay Area that could be used to relate types of neighborhoods with the political behavior of their inhabitants. This type of classification is directly inspired by works in the 'geodemographics' field, especially the <a href="http://loac.datashine.org.uk/#datalayer=loac11_offco&layers=BTTT&zoom=12&lon=-0.1500&lat=51.5200">London Output Area Classification</a> and this <a href="http://www.tandfonline.com/doi/full/10.1080/00045608.2015.1052335">article by Seth Spielman and Alex Singleton</a> on how to use uncertain data from the American Community Survey to study neighborhoods in the US.</p>
	<p>This is still a work in progress...</p>
</div>
</body>
</html>